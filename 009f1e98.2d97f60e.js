(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{106:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return m}));var a=n(0),i=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=i.a.createContext({}),p=function(e){var t=i.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},b=function(e){var t=p(e.components);return i.a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},d=i.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,r=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),b=p(n),d=a,m=b["".concat(r,".").concat(d)]||b[d]||u[d]||o;return n?i.a.createElement(m,c(c({ref:t},s),{},{components:n})):i.a.createElement(m,c({ref:t},s))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,r=new Array(o);r[0]=d;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:a,r[1]=c;for(var s=2;s<o;s++)r[s]=n[s];return i.a.createElement.apply(null,r)}return i.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},57:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return p}));var a=n(2),i=n(6),o=(n(0),n(106)),r={id:"configuration",title:"Configuration",sidebar_label:"Configuration"},c={unversionedId:"getting-started/configuration",id:"getting-started/configuration",isDocsHomePage:!1,title:"Configuration",description:"Ensure this liquid partial is included at the top of the `` element on every page.",source:"@site/docs/getting-started/configuration.md",slug:"/getting-started/configuration",permalink:"/homeflowjs-docs/docs/getting-started/configuration",editUrl:"https://github.com/homeflow/homeflowjs-docs/edit/master/docs/getting-started/configuration.md",version:"current",sidebar_label:"Configuration",sidebar:"someSidebar",previous:{title:"Introduction",permalink:"/homeflowjs-docs/docs/"},next:{title:"Entry Points",permalink:"/homeflowjs-docs/docs/getting-started/entry-points"}},l=[{value:"<code>hfInitialize</code>",id:"hfinitialize",children:[]}],s={rightToc:l};function p(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Ensure this liquid partial is included at the top of the ",Object(o.b)("inlineCode",{parentName:"p"},"<head>")," element ",Object(o.b)("strong",{parentName:"p"},"on every page"),"."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-html"}),"{% include 'homeflow_core/startup' %}\n")),Object(o.b)("p",null,"This partial includes some JavaScript which creates a global ",Object(o.b)("inlineCode",{parentName:"p"},"Homeflow")," object that can be used to set per-agent configuration to be used by in-theme JavaScript code. As much of an agent's preferences and settings are exposed as liquid variables, you can use inline JS inside liquid templates to assign these to Homeflow configuration using ",Object(o.b)("inlineCode",{parentName:"p"},"Homeflow.set"),"."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"Homeflow.set('lettings_prices', {{ company.lettings_price_range_monthly | yaml_safe }});\n")),Object(o.b)("p",null,"This setting could then be accessed from inside your JavaScript files like this:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"const lettingsPrices = Homeflow.get('lettings_prices');\n")),Object(o.b)("p",null,"For more complex data, use our ",Object(o.b)("inlineCode",{parentName:"p"},"include_as_json")," liquid tag. First create a file (which should start with an ",Object(o.b)("inlineCode",{parentName:"p"},"_"),") with the extension ",Object(o.b)("inlineCode",{parentName:"p"},".ljson"),", for example, ",Object(o.b)("inlineCode",{parentName:"p"},"_home_carousel_items.ljson"),". Contrary to what you may expect from the extension, this should actually be a YAML file containing liquid, which will set out the format in which your JSON data should be created."),Object(o.b)("p",null,"The ",Object(o.b)("inlineCode",{parentName:"p"},"_home_carousel_items.ljson")," file might look like this:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),'{% for item in agency.carousel_items %}\n  -\n    linkUrl: {{ item.link_url }}\n    imageLarge: {{ item.image | url_for_generic_image: "1920x_" }}\n    imageMedium: {{ item.image | url_for_generic_image: "720x_" }}\n    imageSmall: {{ item.image | url_for_generic_image: "414x_" }}\n    title: {{ item.title | yaml_safe }}\n    standfirst: {{ item.standfirst | yaml_safe }}\n{% endfor %}\n')),Object(o.b)("p",null,"This will create an array of carousel items with the properties you have defined. Please note the use of the ",Object(o.b)("inlineCode",{parentName:"p"},"yaml_safe")," filter, which should be used on all strings to ensure unsafe characters are escaped properly."),Object(o.b)("p",null,"You can then set this using ",Object(o.b)("inlineCode",{parentName:"p"},"include_as_json")," (let's imagine the ",Object(o.b)("inlineCode",{parentName:"p"},"_home_carousel_items.ljson")," is in a directory called ",Object(o.b)("inlineCode",{parentName:"p"},"data")," to keep things organised):"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"Homeflow.set('carousel_items', {% include_as_json data/home_carousel_items %})\n")),Object(o.b)("p",null,"Using this technique you can construct complex structures from Liquid code ready to be used by your front-end."),Object(o.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(o.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(o.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(o.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(o.b)("p",{parentName:"div"},"For compatibility with older themes, ",Object(o.b)("inlineCode",{parentName:"p"},"Ctesius.addConfig")," and ",Object(o.b)("inlineCode",{parentName:"p"},"Ctesius.getConfig")," are available as aliases to ",Object(o.b)("inlineCode",{parentName:"p"},"Homeflow.set")," and ",Object(o.b)("inlineCode",{parentName:"p"},"Homeflow.get")," (although new themes should only use the new ",Object(o.b)("inlineCode",{parentName:"p"},"Homeflow")," object)."))),Object(o.b)("p",null,"You should also add this partial to the ",Object(o.b)("em",{parentName:"p"},"bottom")," of the ",Object(o.b)("inlineCode",{parentName:"p"},"<body>")," element ",Object(o.b)("strong",{parentName:"p"},"on every page"),":"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-html"}),"{% include 'homeflow_core/body %}\n")),Object(o.b)("p",null,"This contains things like custom styles loaded from the agent's admin area."),Object(o.b)("h2",{id:"hfinitialize"},Object(o.b)("inlineCode",{parentName:"h2"},"hfInitialize")),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"hfInitialize")," is a function that must be called as early as possible in ",Object(o.b)("strong",{parentName:"p"},"each entry point"),". We suggest placing this at the top of a ",Object(o.b)("inlineCode",{parentName:"p"},"global.jsx")," file to be imported into each entry bundle."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"// global.jsx\nimport { hfInitialize } from 'homeflowjs';\n\nhfInitialize();\n")),Object(o.b)("p",null,"This function will attach some additional methods to give you low-level access to various state. See the section on ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"/homeflowjs-docs/docs/getting-started/redux"}),"Redux")," for more detail."))}p.isMDXComponent=!0}}]);